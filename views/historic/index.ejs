<%- include ../partials/header.ejs %>
<%- include ../partials/sidebar.ejs %>
<!-- TODO change to bower -->
<script src="https://cdn.plot.ly/plotly-1.8.0.min.js"></script>
<script type="text/javascript" src="/moment/min/moment.min.js"></script>


<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/dataTables.buttons.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.colVis.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.flash.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.html5.min.js"></script>
<script type="text/javascript" src="https://cdn.datatables.net/buttons/1.5.1/js/buttons.print.min.js"></script>
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/1.5.1/css/buttons.dataTables.min.css">


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />


<script src="https://cdn.jsdelivr.net/npm/gijgo@1.9.9/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://cdn.jsdelivr.net/npm/gijgo@1.9.9/css/gijgo.min.css" rel="stylesheet" type="text/css" />


<body class="pl-0 pr-0 bg-light">
  <main class="col-lg-9 ml-lg-auto col-lg-10 px-4">

    <div id="loading_screen" class="container">
      <%- include ./loader.ejs %>
      <p class="lead" style="text-align: center;">Fetching info...</p>
    </div>
    <div id="page_div" style="display:none;">
    <hr>
    <div class="ml-0 mr-0">
      <div class="row pt-0 pb-0">
        <div class="col">
          <select id="instrument_select" class="custom-select input-group mb-3" onchange="load_page()" required>
            <option value="">Choose...</option>
          </select>
        </div>
        <div class="col">
          <select id="data_type_select" class="custom-select input-group mb-3" onchange="load_page()" required>
            <option value="analysis" selected>Analysis Data</option>
            <option value="raw">Raw Data</option>
          </select>
        </div>
        <div class="col">
          <div id="daterange"  style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc;">
            <i class="fa fa-calendar"></i>&nbsp;
            <span></span> <i class="fa fa-caret-down"></i>
          </div>
          <div id="datepickerdiv" style="display:none;">
            <div class="col">
              <input id="datepicker" width="276" />
            </div>
          </div>
        </div>
        <div class="col-1 pl-0" style="display:none;" id="download_button">
          <button onclick="download_csv()" type="button" class="btn btn-success" name="button">Download</button>
        </div>
      </div>
    </div>
    <div id="data_div" style="display: none;">
    <hr style="margin-top:0;">
    <div class="row mt-50" id="data_average" style="text-align:center;margin:40px 0 40px 0;">
      <div class="col"><span class="text-muted"><b>Device ID:</b></span><br><b><lead id="deviceId" class="display-4 mb-3"></lead></b></div>
      <div class="col"><span class="text-muted"><b>Average Total Carbon:</b></span><br><b><lead id="total_carbon" class="display-4 mb-3"></lead></b>ug</div>
      <div class="col"><span class="text-muted"><b>Average Baseline:</b></span><br><b><lead id="baseline" class="display-4 mb-3"></lead></b>ppm</div>
      <div class="col"><span class="text-muted"><b>Average Max Temp:</b></span><br><b><lead id="max_temp" class="display-4 mb-3"></lead></b>degC</div>
    </div>
    <hr>
    <div class="ml-0 mr-0">
      <div class="row border" style="background-color: white;">
        <div class="col pr-0 pl-0">
          <div id="graph" ></div>
        </div>
      </div>
      <hr>
      <div class="row">
        <table id="data_table" class="table table-striped table-bordered nowrap" style="width:100%"></table>
      </div>
    </div>
    </div>
    </div>

  </main>
</body>

<script type="text/javascript" src="/javascripts/historic_index.js"></script>
